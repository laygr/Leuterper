class Range
{
	Number inferior;
	Number superior;

	Range(Number inferior, Number superior)
	{
		this.inferior = inferior;
		this.superior = superior;
	}
}

class Array[X]
{
	List[Range] ranges;
	List[X] elements;
	List[Number] ms;
	Number dimensions;
	Number total;

	Array(List[Range] rangos)
	{
		this.dimensions = rangos.count();
		this.ms = new List[Number](this.dimensions + 1);
		this.prepare();
		this.elements = new List[X](total);
	}

	X get(List[Number] indexes)
	{
		Number index = this.getIndexForIndexes(indexes);
		return this.elements.get(index);

	}
	Void set(List[Number] indexes, X element)
	{
		Number index = this.getIndexForIndexes(indexes);
		this.elements.set(index, element);
	}

	Number getIndexForIndexes(List[Number] indexes)
	{
		Number index = 0;
		Number i = 0;
		while i < this.dimensions
		{
			index += ( indexes.get(i) * this.ms.get(i+1) );
			i += 1;
		}
		return index;
	}

	Void prepare()
	{
		Number i = 0;
		Number total = 1;
		Range range;
		Number rangeSize;
		while i < this.dimensions
		{
			range = this.ranges.get(i);
			rangeSize = range.superior - range.inferior + 1;
			total *= rangeSize;
			i += 1;
		}
		this.ms.set(0, total);
		i = 1;
		while i < this.dimensions
		{
			range = this.ranges.get(i-1);
			rangeSize = range.superior - range.inferior + 1;
			this.ms.set(i, this.ms.get(i-1) / rangeSize);
			i += 1;
		}
		
		Number k = 0;
		i = 0;
		while i < this.dimensions
		{
			k += ( this.ms.get(i+1) * this.ranges.get(i).inferior);
			i += 1;
		}
		this.ms.set(this.dimensions, k);
	}
}

Void main(String arg)
{
	Range r1 = new Range(2, 4);
	Range r2 = new Range(3, 6);
	Range r3 = new Range(4, 5);
	Array[String] arr = new Array[String]({r1, r2, r3}:Range);
	arr.set({2, 4, 5}:Number, "Lay");
	write(arr.get({2, 4, 5}:Number));
}